#!/bin/bash

# Install Zsh
apt-get update
apt-get install -y zsh

# Change the default shell to Zsh for the root user
chsh -s $(which zsh)

# Setup configuration directories
export XDG_CONFIG_HOME="$HOME/.config"
mkdir -p "$XDG_CONFIG_HOME"
mkdir -p "$XDG_CONFIG_HOME/nixpkgs"

# Link your Nix configuration file
ln -sf "$PWD/config.nix" "$XDG_CONFIG_HOME/nixpkgs/config.nix"

# Install Nix packages from config.nix
nix-env -iA nixpkgs.myPackages

# Ensure the script is executed upon container creation
exec zsh -l
